<!DOCTYPE html>
<html lang="en">

<head>
  <title></title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>

</body>
<script>

  if (navigator.serviceWorker) {
    navigator.serviceWorker.register('/serviceWorker.js').then(function (registration) {
      console.log('service worker 注册成功');
      onmessage = function (e) {
        if (e.data == "forward-to-service-worker") {
          console.log("kotlin#index port1111", e.data, e.ports[0], navigator.serviceWorker)
          navigator.serviceWorker.controller.postMessage(["ipc-channel", e.ports[0]], [e.ports[0]]);
        }
      }
    }).catch(function (err) {
      console.log('service worker 注册失败', err)
    });
  }

</script>

</html>
